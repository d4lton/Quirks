{"version":3,"file":null,"sources":["../src/quirks/Quirk.js","../src/QuirksManager.js"],"sourcesContent":["/**\n * Quirk\n *\n * Copyright ©2017 Dana Basken <dbasken@gmail.com>\n *\n */\nclass Quirk {\n\n  constructor() {\n  }\n\n  set element(value) {\n    this._element = value;\n  }\n\n  set animated(value) {\n    this._animated = value;\n  }\n\n  get animated() {\n    return this._animated;\n  }\n\n  start() {\n    this.onStart();\n    this._animate();\n  }\n\n  update(timestamp) {\n    this.onUpdate(timestamp);\n    this._animate();\n  }\n\n  add() {\n    this._asyncCall('onAdd');\n  }\n\n  remove() {\n    this.animated = false;\n    this._asyncCall('onRemove');\n  }\n\n  onStart() {\n  }\n\n  onUpdate(timestamp) {\n  }\n\n  onAdd() {\n  }\n\n  onRemove() {\n  }\n\n  _animate() {\n    if (this.animated) {\n      window.requestAnimationFrame(this.update.bind(this));\n    }\n  }\n\n  _asyncCall(method, ...args) {\n    if (typeof this[method] === 'function') {\n      setTimeout(function() {\n        this[method].apply(this, args);\n      }.bind(this), 0);\n    }\n  }\n\n}\n\nexport default Quirk;\n","/**\n * QuirksManager\n *\n * Copyright ©2017 Dana Basken <dbasken@gmail.com>\n *\n */\nimport Quirk from './quirks/Quirk.js';\n\nclass QuirksManager {\n\n  constructor() {\n    this._observe();\n  }\n\n  add(selector, quirk) {\n    if (selector instanceof HTMLElement) {\n      this._add(selector, quirk);\n    } else {\n      var elements = document.querySelectorAll(selector);\n      elements.forEach(function(element) {\n        this._add(element, quirk);\n      }.bind(this));\n    }\n  }\n\n  start() {\n    var elements = document.querySelectorAll('.quirk-enabled');\n    elements.forEach(function(element) {\n      element.quirks.forEach(function(quirk) {\n        quirk.start();\n      });\n    });\n  }\n\n  _add(element, quirk) {\n    if (quirk instanceof Quirk) {\n      if (!element.quirks) {\n        element.quirks = [];\n      }\n      element.quirks.push(quirk);\n      quirk.element = element;\n      element.classList.add('quirk-enabled');\n    } else {\n      throw new Error('must be instance of Quirk');\n    }\n  }\n\n  _observe() {\n    var observer = new MutationObserver(function(mutations) {\n      mutations.forEach(function(mutation) {\n        if (mutation.type === 'childList') {\n          if (mutation.removedNodes) {\n            mutation.removedNodes.forEach(function(node) {\n              if (node.quirks) {\n                node.quirks.forEach(function(quirk) {\n                  quirk.remove();\n                }.bind(this));\n              }\n            }.bind(this));\n          }\n          if (mutation.addedNodes) {\n            mutation.addedNodes.forEach(function(node) {\n              if (node.quirks) {\n                node.quirks.forEach(function(quirk) {\n                  quirk.add();\n                }.bind(this));\n              }\n            }.bind(this));\n          }\n        }\n      }.bind(this));\n    }.bind(this));\n    var config = {attributes: false, childList: true, characterData: false, subtree: true};\n    observer.observe(document, config);\n  }\n\n}\n\nexport {QuirksManager, Quirk};\n"],"names":["Quirk","onStart","_animate","timestamp","onUpdate","_asyncCall","animated","requestAnimationFrame","update","bind","method","args","apply","value","_element","_animated","QuirksManager","_observe","selector","quirk","HTMLElement","_add","elements","document","querySelectorAll","forEach","element","quirks","start","push","classList","add","Error","observer","MutationObserver","mutations","mutation","type","removedNodes","node","remove","addedNodes","config","attributes","childList","characterData","subtree","observe"],"mappings":"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"}