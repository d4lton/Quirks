<html>
  <head>
  </head>
  <body>
    <div class="test-div">Hello, I started out black, now I'm red. Resize the window.</div>
    <script src="dist/Quirks.umd.js"></script>
    <script>

      class ColorChangeQuirk extends Quirks.Quirk {
        onStart() {
          this._element.style.color = 'red';
        }
      }

      class WindowResizeQuirk extends Quirks.Quirk {
        onStart() {
          this._innerText = this._element.innerText;
          var listener = this._resizeListener.bind(this);
          window.addEventListener('resize', listener);
        }
        _resizeListener(event) {
          this._element.innerText = this._innerText + ' (width: ' + event.target.innerWidth + ')';
        }
      }

      class ElementChangeQuirk extends Quirks.Quirk {
        onAdd() {
          console.log('added', this);
        }
        onRemove() {
          console.log('removed', this);
        }
      }

      class FrameUpdateQuirk extends Quirks.Quirk {
        constructor() {
          super({animated: true});
        }
        onStart() {
          this._originalText = this._element.innerText;
          this._frame = 0;
        }
        onUpdate(timestamp) {
          this._frame++;
          this._element.innerText = this._originalText + this._frame + ' ' + timestamp;
        }
      }

      var bm = new Quirks.QuirksManager();
      bm.add('.test-div', new ColorChangeQuirk());
      bm.add('.test-div', new WindowResizeQuirk());

      var element1 = document.createElement('div');
      element1.innerText = "Look in console for MutationRecord";
      bm.add(element1, new ElementChangeQuirk());
      setTimeout(function() {
        document.body.appendChild(element1);
      }, 2000);

      var element2 = document.createElement('div');
      element2.innerText = "Frames: ";
      bm.add(element2, new FrameUpdateQuirk());
      document.body.appendChild(element2);

      bm.start();

    </script>
  </body>
</html>
