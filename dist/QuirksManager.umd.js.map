{"version":3,"file":null,"sources":["../src/quirks/Quirk.js","../src/QuirksManager.js"],"sourcesContent":["class Quirk {\n\n  constructor({animated = false} = {}) {\n    this._animated = animated;\n  };\n\n  setElement(element) {\n    this._element = element;\n  };\n\n  start() {\n    this.onStart();\n    this._animate();\n  };\n\n  _animate() {\n    if (this._animated) {\n      window.requestAnimationFrame(this.update.bind(this));\n    }\n  };\n\n  _asyncCall(method, ...args) {\n    if (typeof this[method] === 'function') {\n      setTimeout(function() {\n        this[method].apply(this, args);\n      }.bind(this), 0);\n    }\n  };\n\n  update(timestamp) {\n    this.onUpdate(timestamp);\n    this._animate();\n  };\n\n  add() {\n    this._asyncCall('onAdd');\n  };\n\n  remove() {\n    this._animated = false;\n    this._asyncCall('onRemove');\n  };\n\n  onStart() {\n  };\n\n  onUpdate(timestamp) {\n  };\n\n  onAdd() {\n  };\n\n  onRemove() {\n  };\n\n};\n\nexport default Quirk;\n","import Quirk from './quirks/Quirk.js';\n\nclass QuirksManager {\n\n  constructor() {\n    this._observe();\n  };\n\n  add(selector, quirk) {\n    if (selector instanceof HTMLElement) {\n      this._add(selector, quirk);\n    } else {\n      var elements = document.querySelectorAll(selector);\n      elements.forEach(function(element) {\n        this._add(element, quirk);\n      }.bind(this));\n    }\n  };\n\n  _add(element, quirk) {\n    if (!element.quirks) {\n      element.quirks = [];\n    }\n    element.quirks.push(quirk);\n    quirk.setElement(element);\n    element.classList.add('quirk-enabled');\n  };\n\n  _observe() {\n    var observer = new MutationObserver(function(mutations) {\n      mutations.forEach(function(mutation) {\n        if (mutation.type === 'childList') {\n          if (mutation.removedNodes) {\n            mutation.removedNodes.forEach(function(node) {\n              if (node.quirks) {\n                node.quirks.forEach(function(quirk) {\n                  quirk.remove();\n                }.bind(this));\n              }\n            }.bind(this));\n          }\n          if (mutation.addedNodes) {\n            mutation.addedNodes.forEach(function(node) {\n              if (node.quirks) {\n                node.quirks.forEach(function(quirk) {\n                  quirk.add();\n                }.bind(this));\n              }\n            }.bind(this));\n          }\n        }\n      }.bind(this));\n    }.bind(this));\n    var config = {attributes: false, childList: true, characterData: false, subtree: true};\n    observer.observe(document, config);\n  };\n\n  start() {\n    var elements = document.querySelectorAll('.quirk-enabled');\n    elements.forEach(function(element) {\n      element.quirks.forEach(function(quirk) {\n        quirk.start();\n      });\n    });\n  };\n\n};\n\nQuirksManager.Quirk = Quirk;\n\nexport default QuirksManager;\n"],"names":["Quirk","animated","_animated","element","_element","onStart","_animate","requestAnimationFrame","update","bind","method","args","apply","timestamp","onUpdate","_asyncCall","QuirksManager","_observe","selector","quirk","HTMLElement","_add","elements","document","querySelectorAll","forEach","quirks","push","setElement","classList","add","observer","MutationObserver","mutations","mutation","type","removedNodes","node","remove","addedNodes","config","attributes","childList","characterData","subtree","observe","start"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA;mBAEiC;mFAAJ,EAAI;6BAAxBC,QAAwB;QAAxBA,QAAwB,iCAAb,KAAa;;;;SAC9BC,SAAL,GAAiBD,QAAjB;;;;;+BAGSE,SAAS;WACbC,QAAL,GAAgBD,OAAhB;;;;4BAGM;WACDE,OAAL;WACKC,QAAL;;;;+BAGS;UACL,KAAKJ,SAAT,EAAoB;eACXK,qBAAP,CAA6B,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAA7B;;;;;+BAIOC,QAAiB;wCAANC,IAAM;YAAA;;;UACtB,OAAO,KAAKD,MAAL,CAAP,KAAwB,UAA5B,EAAwC;mBAC3B,YAAW;eACfA,MAAL,EAAaE,KAAb,CAAmB,IAAnB,EAAyBD,IAAzB;SADS,CAETF,IAFS,CAEJ,IAFI,CAAX,EAEc,CAFd;;;;;2BAMGI,WAAW;WACXC,QAAL,CAAcD,SAAd;WACKP,QAAL;;;;0BAGI;WACCS,UAAL,CAAgB,OAAhB;;;;6BAGO;WACFb,SAAL,GAAiB,KAAjB;WACKa,UAAL,CAAgB,UAAhB;;;;8BAGQ;;;6BAGDF,WAAW;;;4BAGZ;;;+BAGG;;;IAGZ,AAED;;ICvDMG;2BAEU;;;SACPC,QAAL;;;;;wBAGEC,UAAUC,OAAO;UACfD,oBAAoBE,WAAxB,EAAqC;aAC9BC,IAAL,CAAUH,QAAV,EAAoBC,KAApB;OADF,MAEO;YACDG,WAAWC,SAASC,gBAAT,CAA0BN,QAA1B,CAAf;iBACSO,OAAT,CAAiB,UAAStB,OAAT,EAAkB;eAC5BkB,IAAL,CAAUlB,OAAV,EAAmBgB,KAAnB;SADe,CAEfV,IAFe,CAEV,IAFU,CAAjB;;;;;yBAMCN,SAASgB,OAAO;UACf,CAAChB,QAAQuB,MAAb,EAAqB;gBACXA,MAAR,GAAiB,EAAjB;;cAEMA,MAAR,CAAeC,IAAf,CAAoBR,KAApB;YACMS,UAAN,CAAiBzB,OAAjB;cACQ0B,SAAR,CAAkBC,GAAlB,CAAsB,eAAtB;;;;+BAGS;UACLC,WAAW,IAAIC,gBAAJ,CAAqB,UAASC,SAAT,EAAoB;kBAC5CR,OAAV,CAAkB,UAASS,QAAT,EAAmB;cAC/BA,SAASC,IAAT,KAAkB,WAAtB,EAAmC;gBAC7BD,SAASE,YAAb,EAA2B;uBAChBA,YAAT,CAAsBX,OAAtB,CAA8B,UAASY,IAAT,EAAe;oBACvCA,KAAKX,MAAT,EAAiB;uBACVA,MAAL,CAAYD,OAAZ,CAAoB,UAASN,KAAT,EAAgB;0BAC5BmB,MAAN;mBADkB,CAElB7B,IAFkB,CAEb,IAFa,CAApB;;eAF0B,CAM5BA,IAN4B,CAMvB,IANuB,CAA9B;;gBAQEyB,SAASK,UAAb,EAAyB;uBACdA,UAAT,CAAoBd,OAApB,CAA4B,UAASY,IAAT,EAAe;oBACrCA,KAAKX,MAAT,EAAiB;uBACVA,MAAL,CAAYD,OAAZ,CAAoB,UAASN,KAAT,EAAgB;0BAC5BW,GAAN;mBADkB,CAElBrB,IAFkB,CAEb,IAFa,CAApB;;eAFwB,CAM1BA,IAN0B,CAMrB,IANqB,CAA5B;;;SAZY,CAqBhBA,IArBgB,CAqBX,IArBW,CAAlB;OADkC,CAuBlCA,IAvBkC,CAuB7B,IAvB6B,CAArB,CAAf;UAwBI+B,SAAS,EAACC,YAAY,KAAb,EAAoBC,WAAW,IAA/B,EAAqCC,eAAe,KAApD,EAA2DC,SAAS,IAApE,EAAb;eACSC,OAAT,CAAiBtB,QAAjB,EAA2BiB,MAA3B;;;;4BAGM;UACFlB,WAAWC,SAASC,gBAAT,CAA0B,gBAA1B,CAAf;eACSC,OAAT,CAAiB,UAAStB,OAAT,EAAkB;gBACzBuB,MAAR,CAAeD,OAAf,CAAuB,UAASN,KAAT,EAAgB;gBAC/B2B,KAAN;SADF;OADF;;;;;;AAOH;;AAED9B,cAAchB,KAAd,GAAsBA,KAAtB,CAEA;;;;"}